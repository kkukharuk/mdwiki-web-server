package js

import (
	"encoding/base64"
	"net/http"
)

func (cfg *Config) IEEmulationModesWarningJS(w http.ResponseWriter, r *http.Request) {
	cfg.Logger.Debugf("Getting page: %s", r.URL.Path)
	js_b64 := "Ly8gTk9USUNFISEgRE8gTk9UIFVTRSBBTlkgT0YgVEhJUyBKQVZBU0NSSVBUCi8vIElUJ1MgSlVTVCBKVU5LIEZPUiBPVVIgRE9DUyEKLy8gKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCi8qIQogKiBDb3B5cmlnaHQgMjAxNC0yMDE1IFR3aXR0ZXIsIEluYy4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIENyZWF0aXZlIENvbW1vbnMgQXR0cmlidXRpb24gMy4wIFVucG9ydGVkIExpY2Vuc2UuIEZvcgogKiBkZXRhaWxzLCBzZWUgaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMC8uCiAqLwovLyBJbnRlbmRlZCB0byBwcmV2ZW50IGZhbHNlLXBvc2l0aXZlIGJ1ZyByZXBvcnRzIGFib3V0IEJvb3RzdHJhcCBub3Qgd29ya2luZyBwcm9wZXJseSBpbiBvbGQgdmVyc2lvbnMgb2YgSUUgZHVlIHRvIGZvbGtzIHRlc3RpbmcgdXNpbmcgSUUncyB1bnJlbGlhYmxlIGVtdWxhdGlvbiBtb2Rlcy4KKGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGZ1bmN0aW9uIGVtdWxhdGVkSUVNYWpvclZlcnNpb24oKSB7CiAgICB2YXIgZ3JvdXBzID0gL01TSUUgKFswLTkuXSspLy5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KQogICAgaWYgKGdyb3VwcyA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIGllVmVyc2lvbk51bSA9IHBhcnNlSW50KGdyb3Vwc1sxXSwgMTApCiAgICB2YXIgaWVNYWpvclZlcnNpb24gPSBNYXRoLmZsb29yKGllVmVyc2lvbk51bSkKICAgIHJldHVybiBpZU1ham9yVmVyc2lvbgogIH0KCiAgZnVuY3Rpb24gYWN0dWFsTm9uRW11bGF0ZWRJRU1ham9yVmVyc2lvbigpIHsKICAgIC8vIERldGVjdHMgdGhlIGFjdHVhbCB2ZXJzaW9uIG9mIElFIGluIHVzZSwgZXZlbiBpZiBpdCdzIGluIGFuIG9sZGVyLUlFIGVtdWxhdGlvbiBtb2RlLgogICAgLy8gSUUgSmF2YVNjcmlwdCBjb25kaXRpb25hbCBjb21waWxhdGlvbiBkb2NzOiBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9saWJyYXJ5LzEyMWh6dGszJTI4dj12cy45NCUyOS5hc3B4CiAgICAvLyBAY2Nfb24gZG9jczogaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vbGlicmFyeS84a2E5MGsyZSUyOHY9dnMuOTQlMjkuYXNweAogICAgdmFyIGpzY3JpcHRWZXJzaW9uID0gbmV3IEZ1bmN0aW9uKCcvKkBjY19vbiByZXR1cm4gQF9qc2NyaXB0X3ZlcnNpb247IEAqLycpKCkgLy8ganNoaW50IGlnbm9yZTpsaW5lCiAgICBpZiAoanNjcmlwdFZlcnNpb24gPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gMTEgLy8gSUUxMSsgbm90IGluIGVtdWxhdGlvbiBtb2RlCiAgICB9CiAgICBpZiAoanNjcmlwdFZlcnNpb24gPCA5KSB7CiAgICAgIHJldHVybiA4IC8vIElFOCAob3IgbG93ZXI7IGhhdmVuJ3QgdGVzdGVkIG9uIElFPDgpCiAgICB9CiAgICByZXR1cm4ganNjcmlwdFZlcnNpb24gLy8gSUU5IG9yIElFMTAgaW4gYW55IG1vZGUsIG9yIElFMTEgaW4gbm9uLUlFMTEgbW9kZQogIH0KCiAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQKICBpZiAodWEuaW5kZXhPZignT3BlcmEnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ1ByZXN0bycpID4gLTEpIHsKICAgIHJldHVybiAvLyBPcGVyYSwgd2hpY2ggbWlnaHQgcHJldGVuZCB0byBiZSBJRQogIH0KICB2YXIgZW11bGF0ZWQgPSBlbXVsYXRlZElFTWFqb3JWZXJzaW9uKCkKICBpZiAoZW11bGF0ZWQgPT09IG51bGwpIHsKICAgIHJldHVybiAvLyBOb3QgSUUKICB9CiAgdmFyIG5vbkVtdWxhdGVkID0gYWN0dWFsTm9uRW11bGF0ZWRJRU1ham9yVmVyc2lvbigpCgogIGlmIChlbXVsYXRlZCAhPT0gbm9uRW11bGF0ZWQpIHsKICAgIHdpbmRvdy5hbGVydCgnV0FSTklORzogWW91IGFwcGVhciB0byBiZSB1c2luZyBJRScgKyBub25FbXVsYXRlZCArICcgaW4gSUUnICsgZW11bGF0ZWQgKyAnIGVtdWxhdGlvbiBtb2RlLlxuSUUgZW11bGF0aW9uIG1vZGVzIGNhbiBiZWhhdmUgc2lnbmlmaWNhbnRseSBkaWZmZXJlbnRseSBmcm9tIEFDVFVBTCBvbGRlciB2ZXJzaW9ucyBvZiBJRS5cblBMRUFTRSBET05cJ1QgRklMRSBCT09UU1RSQVAgQlVHUyBiYXNlZCBvbiB0ZXN0aW5nIGluIElFIGVtdWxhdGlvbiBtb2RlcyEnKQogIH0KfSkoKTsK"
	js, _ := base64.StdEncoding.DecodeString(js_b64)
	w.Header().Set("Content-Type", "application/javascript; charset=utf-8")
	w.Write(js)
}
